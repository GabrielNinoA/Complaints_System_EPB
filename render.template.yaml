services:
  # Servicio web principal (backend + frontend)
  - type: web
    name: sistema-quejas-boyaca
    runtime: node
    region: oregon
    plan: starter
    branch: main
    buildCommand: npm run build
    startCommand: npm start
    healthCheckPath: /health
    
    # Variables de entorno
    envVars:
      # Configuración básica
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "3000"
        
      # IMPORTANTE: Las siguientes variables deben configurarse manualmente en Render
      # por seguridad. Ver CONFIGURACION_RENDER.txt para valores completos.
      
      # Base de datos (Clever Cloud MySQL) - CONFIGURAR MANUALMENTE
      # - key: MYSQL_ADDON_DB
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: MYSQL_ADDON_HOST
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: MYSQL_ADDON_PASSWORD
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: MYSQL_ADDON_PORT
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: MYSQL_ADDON_URI
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: MYSQL_ADDON_USER
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: MYSQL_ADDON_VERSION
      #   value: "8.4"
        
      # Variables alternativas (compatibilidad) - CONFIGURAR MANUALMENTE
      # - key: DB_HOST
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: DB_PORT
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: DB_USER
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: DB_PASSWORD
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: DB_NAME
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: DATABASE_URL
      #   value: [CONFIGURAR_EN_RENDER]
        
      # Seguridad (generar automáticamente)
      - key: JWT_SECRET
        generateValue: true
      - key: SESSION_SECRET
        generateValue: true
        
      # Email (opcional) - CONFIGURAR MANUALMENTE SI SE NECESITA
      # - key: EMAIL_HOST
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: EMAIL_PORT
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: EMAIL_USER
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: EMAIL_PASSWORD
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: EMAIL_FROM
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: EMAIL_TO
      #   value: [CONFIGURAR_EN_RENDER]
      # - key: EMAIL_SECURE
      #   value: "false"
      # - key: ENABLE_EMAIL_NOTIFICATIONS
      #   value: "true"
